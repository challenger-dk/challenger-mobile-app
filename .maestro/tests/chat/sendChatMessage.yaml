appId: ${MAESTRO_APP_ID}
tags:
  - chat
  - messages
env:
  USER1_EMAIL: user1@challenger.dk
  USER1_PASSWORD: password12
  MAESTRO_APP_ID: ${MAESTRO_APP_ID || "com.daniellorenzen.challenger"}
---
# Test: Send Chat Message
# Tests sending a message to a friend

- launchApp
- waitForAnimationToEnd

# Navigate to Chat tab
- tapOn: "Chat, tab, 2 of 5"
- waitForAnimationToEnd

# Verify chat screen is visible
- assertVisible:
    text: "Beskeder"

# Verify tabs are visible
- assertVisible: "Hold"
- assertVisible: "Venner"

# Test switching to Friends tab
- tapOn: "Venner"
- waitForAnimationToEnd
- assertVisible: ".*Charlie.*"

# Click on Charlie Brown
- tapOn: ".*Charlie.*"
- waitForAnimationToEnd
- assertVisible: "Online"

# Send a message
- tapOn:
    id: "input-text"
- inputText: "Hej Charlie!"
- tapOn:
    id: "send-button"
- waitForAnimationToEnd
- assertVisible: "Hej Charlie!"
- assertVisible:
    id: "message-bubble"
